# EBOM (Engineering Bill of Materials) - Шаровой кран
<img width="1536" height="1024" alt="image" src="https://github.com/user-attachments/assets/70477f2c-d3cd-4241-98d6-bc49d6131bd1" />

1. Назначение проекта

Этот репозиторий демонстрирует полноценную инженерную модель EBOM (Engineering Bill of Materials), реализованную в виде графа знаний на базе Neo4j.
<img width="3751" height="3220" alt="graph (11)" src="https://github.com/user-attachments/assets/212848f0-3386-46ca-be2f-612ade6d2d1f" />


Проект показывает, как реальное промышленное изделие (шаровой кран DN50 PN16) может быть представлено не просто как список деталей, а как структурированная, конфигурируемая, трассируемая модель, пригодная для:

	•	PLM-систем
	•	инженерного анализа
	•	управления конфигурацией и вариантами исполнения
	•	impact analysis при изменениях
	•	дальнейшего использования в AI / Knowledge Graph сценариях

Это архитектурно корректный шаблон, приближенный к промышленным PLM-подходам.

2. Что моделируется

В модели явно представлены:

	•	базовая структура изделия (EBOM)
	•	сборочные единицы и детали
	•	инженерные требования
	•	релизы изделия (версии)
	•	варианты исполнения (Variants)
	•	отличия между вариантами (Differences)
	•	конфигурация изделия (Product Configuration)
	•	документация
	•	ценовая информация

Каждая ключевая инженерная сущность представлена отдельным узлом графа с собственной семантикой и жизненным циклом, а не как вложенное или сериализованное свойство.

3. Ключевая идея модели

Классический подход

В традиционных системах:

	•	EBOM дублируется под каждый вариант
	•	отличия растворяются в атрибутах
	•	трассируемость усложняется

Подход этого проекта

	•	EBOM — единая
	•	Variant — слой конфигурации, а не копия BOM
	•	Differences — отдельные узлы, описывающие инженерные различия
	•	Release управляет жизненным циклом изделия

Это резко снижает сложность управления и повышает прозрачность.

4. Модель данных

4.1 Типы узлов



4.2 Типы связей



5. Управление конфигурацией

Release

Release — это версия изделия, определяющая:

	•	технические характеристики
	•	область применимости
	•	период действия
	•	статус (Draft / Released / EOL)

Release не дублирует EBOM, а ссылается на неё.

Variant

Variant описывает вариант исполнения изделия:

	•	материалы
	•	эксплуатационные свойства
	•	стандарты
	•	каталожные коды
	•	доступность

Variant использует:

	•	стандартные детали EBOM
	•	и/или variant-specific детали

Difference

Difference — ключевой элемент модели.

Он явно фиксирует:

	•	что именно отличается
	•	какие детали затронуты
	•	инженерный эффект (стоимость, масса, коррозия и т.д.)
	•	требования к верификации

Это служит основой для:

•	Impact Analysis — в инженерно-PLM контексте определяет, что изменяется,       	пересчитывается или требует проверки при модификации объекта.
•	Change Management — управляемый жизненный цикл изменения, при    			котором:
		•	известен драйвер изменения (требование, дефект, рыночная 						потребность),
		•	прозрачны последствия изменения (EBOM, варианты, цены, 						документация),
		•	определён владелец решения,
		•	зафиксирован момент заморозки (release / baseline),
		•	изменение воспроизводимо и полностью аудитопригодно.
	•	Инженерные согласования — контроль и подтверждение изменений на всех 			уровнях проектирования и выпуска продукции.
6. Конфигуратор изделия

ProductConfiguration моделирует:
	•	опции выбора
	•	допустимые значения
	•	правила совместимости

Это позволяет:

	•	связать инженерную модель с коммерческим конфигуратором
	•	подготовить данные для CPQ(Configure, Price, Quote) / ERP (Enterprise 				Resource Planning)
	•	использовать граф для автоматической проверки корректности 					конфигурации

7. Примеры сценариев


	•	Показать полный состав изделия
	•	Найти все требования, затрагиваемые изменением детали
	•	Сравнить варианты исполнения
	•	Определить влияние изменения материала
	•	Получить вариант-specific BOM

8. Пример запросов

1. Показать полную иерархию EBOM

MATCH path = (top:Assembly {number: '0'})-[:CONTAINS*]->(child)
RETURN 
  length(path) as Уровень,
  labels(child)[0] as Тип,
  child.number as Номер,
  child.name as Наименование
ORDER BY Уровень, toInteger(child.number)

<img width="262" height="696" alt="image" src="https://github.com/user-attachments/assets/81237496-0344-47e3-a3a7-316d4ef11bb4" />


2. Найти деталь и ее требования

MATCH (p:Part {name: 'Шар запорный'})-[:HAS_REQUIREMENT]->(r:Requirement)
RETURN p.number as Номер, p.name as Деталь, r.id as ID_Требования, r.text as Текст_Требования

<img width="3751" height="3220" alt="graph (10)" src="https://github.com/user-attachments/assets/2fa955d5-db79-494c-b6ca-41d8f3af4ec2" />


3. Показать структуру узла

MATCH (parent:Assembly {name: 'Корпус'})-[:CONTAINS]->(child)
RETURN 
  parent.name as Родитель,
  child.number as Номер_Детали,
  child.name as Деталь,
  labels(child)[0] as Тип
ORDER BY toInteger(child.number)

<img width="376" height="203" alt="image" src="https://github.com/user-attachments/assets/81b32bc3-61c4-467f-bd9a-0754420678bd" />

4. Статистика по графу

UNWIND ['Assembly', 'Part', 'Requirement'] AS label
CALL apoc.cypher.run("MATCH (n:" + label + ") RETURN count(n) as count", {})
YIELD value
RETURN 
  CASE label
    WHEN 'Assembly' THEN 'Сборки'
    WHEN 'Part' THEN 'Детали'
    WHEN 'Requirement' THEN 'Требования'
  END as Тип,
  value.count as Количество

<img width="176" height="109" alt="image" src="https://github.com/user-attachments/assets/87fd52be-5144-4b2d-beac-b328d7197dd2" />


5. Поиск деталей по ключевому слову

MATCH (n)
WHERE n.name CONTAINS 'уплотн' OR n.name CONTAINS 'кольцо'
RETURN labels(n)[0] as Тип, n.number as Номер, n.name as Наименование
ORDER BY toInteger(n.number)

<img width="370" height="180" alt="image" src="https://github.com/user-attachments/assets/892c2f4e-3a80-4d59-b0fa-d897d6653459" />


9. Архитектурные принципы

	1.	Явная семантика — никаких универсальных связей
	2.	Read-optimized модель — для анализа и навигации
	3.	Трассируемость по умолчанию
	4.	Готовность к масштабированию

10. Куда развивается модель

	•	versioned EBOM
	•	effectivity (даты / рынки / заводы)
	•	MBOM / SBOM
	•	интеграция с ERP
	•	AI-агенты поверх графа

11. Целевая аудитория

	•	инженеры-конструкторы
	•	системные инженеры
	•	PLM / ERP архитекторы
	•	AI / Knowledge Graph инженеры

Проект ориентирован на Senior / Lead / Architect уровень мышления.
